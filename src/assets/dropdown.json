/* By @FMarquesPTO. All rights reserved. */
{
  "namespace": "dropdown_mcjava",

  "dropdown": {
    "type": "panel",
    "$dropdown_content|default": "common.empty_panel",
    "$dropdown_toggle|default": "common.checkbox",
    "$dropdown_name|default": "dropdown_control",
    "$dropdown_scroll_content_size|default": [ "100%", "500%" ],
    "$dropdown_toggle_name|default": "($dropdown_name + '_toggle')",
    "$dropdown_background|default": "common.dropdown_background",
    "controls": [
      {
        "$dropdown_name@$dropdown_toggle": {
          "type": "dropdown",
          "$toggle_view_binding_name": "$dropdown_name",
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "dropdown_name": "$dropdown_name",
          "dropdown_content_control": "dropdown_content",
          "dropdown_area": "$dropdown_area",
          "$toggle_name": "$dropdown_name",
          "$toggle_state_binding_name": "('#' + $dropdown_name)",
          "$toggle_tts_name": "accessibility.dropdown.tts.title",
          "$toggle_tts_toggle_on_text": "",
          "$toggle_tts_toggle_off_text": "",
          "tts_control_type_order_priority": -1
        }
      },
      {
        "dropdown_content": {
          "type": "input_panel",
          // we really want this on top of everything
          "layer": 42,
          "size": "$dropdown_scroll_content_size",
          "$anchor_dropdown_content_from|default": "top_left",
          "$anchor_dropdown_content_to|default": "top_left",
          "anchor_from": "$anchor_dropdown_content_from",
          "anchor_to": "$anchor_dropdown_content_to",
          "modal": true,
          "property_bag": {
            "#is_dropdown": true
          },
          "$dropdown_content_controls|default": [
            {
              "scroll@common.scrolling_panel": {
                "layer": 2,
                "size": [ "100%", "100%" ],
                "$scrolling_pane_size": [ "100%", "100%" ],
                "$scrolling_content": "$dropdown_content",
                "$scroll_view_port_size": [ "100% - 4px", "100% - 4px" ],
                "$scroll_view_port_size_touch": [ "100% - 4px", "100% - 4px" ],
                "$scroll_view_port_offset": [ 2, 2 ],
                "$scroll_view_port_offset_touch": [ 2, 2 ],
                "$scroll_size": [ 5, "100%-2px" ],
                "$scroll_size_touch": [ 5, "100%-2px" ],
                "$scroll_background_image_control": "$dropdown_background",
                "$background_size": [ "100%", "100%" ],
                "$background_size_touch": [ "100%", "100%" ],
                "$show_background": true,
                "$scroll_bar_contained": true,
                "$scroll_bar_contained_touch": true
              }
            }
          ],
          "controls": "$dropdown_content_controls",
          "bindings": [
            {
              "binding_type": "view",
              "source_control_name": "($dropdown_name)",
              "source_property_name": "#toggle_state",
              "target_property_name": "#visible",
              "resolve_sibling_scope": true
            }
          ],
          "button_mappings": [
            {
              "from_button_id": "button.menu_cancel",
              "to_button_id": "button.dropdown_exit",
              "mapping_type": "global"
            },
            {
              "from_button_id": "button.menu_ok",
              "to_button_id": "button.dropdown_exit",
              "mapping_type": "global"
            },
            {
              "from_button_id": "button.menu_select",
              "to_button_id": "button.dropdown_exit",
              "mapping_type": "global"
            },
            {
              "from_button_id": "button.menu_up",
              "to_button_id": "button.menu_up",
              "mapping_type": "global",
              "scope": "view"
            },
            {
              "from_button_id": "button.menu_down",
              "to_button_id": "button.menu_down",
              "mapping_type": "global",
              "scope": "view"
            },
            {
              "from_button_id": "button.menu_left",
              "to_button_id": "button.menu_left",
              "mapping_type": "global",
              "scope": "view"
            },
            {
              "from_button_id": "button.menu_right",
              "to_button_id": "button.menu_right",
              "mapping_type": "global",
              "scope": "view"
            }
          ]
        }
      }
    ]
  },

  "dropdown_no_scrollpanel@common.dropdown": {
    "$dropdown_scroll_content_size": [ "100%", "100%c" ],
    "$dropdown_content_controls": [
      {
        "background@$dropdown_background": {
          "layer": 1,
          "size": "$dropdown_scroll_content_size",
          "controls": [
            {
              "content@$dropdown_content": {
                "layer": 1
              }
            }
          ]
        }
      }
    ]
  },

  /* Option Dropdown */

  "option_dropdown_control": {
    "type": "panel",
    "size": [150, 20],
    "$dropdown_background_control|default": "common.dropdown_background",
    "$option_dropdown_type|default": "common.dropdown",
    "$option_label|default": "",
    "layer": 2,
    "controls": [
      {
        "dropdown@$option_dropdown_type": {
          "$dropdown_toggle": "settings_common.options_dropdown_toggle_control",
          "$dropdown_background": "$dropdown_background_control",
          // you need to specify the content with "$dropdown_content"
          "$dropdown_content|default": "unset_dropdown_content",
          // you need to specify a unique name with "$dropdown_name"
          "$dropdown_name|default": "unset $dropdown_name",
          // you need to specify a the label with "$options_dropdown_toggle_label_binding"
          "$options_dropdown_toggle_label_binding|default": "unset $options_dropdown_toggle_label_text",
          "$locked_alpha": 0.5,
          "$toggle_tts_header": "$option_label"
        }
      }
    ]
  },

  "option_dropdown_control_no_scroll@settings_common.option_dropdown_control": {
    "$option_dropdown_type": "common.dropdown_no_scrollpanel"
  },

  "options_dropdown_toggle_control@common_toggles.light_template_toggle": {
    "size": [ "100%", "100%" ],
    "$button_type_panel|default": "settings_common.default_options_dropdown_toggle_button_state_content",

    "enabled": "$enabled",
    "$toggle_enabled_binding_name|default": "$option_enabled_binding_name",
    "$toggle_enabled_binding_type|default": "global",
    "$toggle_binding_type|default": "global",
    "variables": [
      {
        "requires": "(not $option_enabled_binding_name or not $enabled)",
        "$toggle_enabled_binding_name": "#not_data_bound",
        "$toggle_enabled_binding_type": "none"
      }
    ]
  },

  "default_options_dropdown_toggle_button_state_content": {
    "type": "stack_panel",
    // new_button_state has a layer of 2
    "layer": 3,
    "orientation": "horizontal",
    "$options_dropdown_toggle_button_state_content|default": [ "100%", "100% - 8px" ],
    "size": "$options_dropdown_toggle_button_state_content",
    "$options_dropdown_toggle_prelabel_content|default": "common.empty_panel",
    "$options_dropdown_toggle_left_padding|default": [ 8, "100%" ],
    "$options_dropdown_toggle_right_padding|default": [ 8, "100%" ],
    "controls": [
      {
        "left_padding@common.empty_panel": {
          "size": "$options_dropdown_toggle_left_padding"
        }
      },
      {
        "option_content@$options_dropdown_toggle_prelabel_content": {
          "$options_dropdown_toggle_prelabel_content_size|default": [ 0, "100%" ],
          "size": "$options_dropdown_toggle_prelabel_content_size"
        }
      },
      {
        "option_content_padding@common.empty_panel": {
          "$options_dropdown_toggle_prelabel_content_padding|default": [ 0, "100%" ],
          "size": "$options_dropdown_toggle_prelabel_content_padding"
        }
      },
      {
        "label_panel": {
          "type": "panel",
          "layer": 1,
          "size": [ "fill", "100%" ],
          "controls": [
            {
              "label@common.new_button_label": {
                "layer": 1,
                "$options_dropdown_label_color_binding_type|default": "none",
                "$options_dropdown_label_color_binding|default": "",
                "$options_dropdown_toggle_label_font_type|default": "default",
                "anchor_from": "left_middle",
                "anchor_to": "left_middle",
                "size": [ "100%", "default" ],
                "max_size": [ "100%", "100%" ],
                "text": "$options_dropdown_toggle_label_binding",
                "font_type": "$options_dropdown_toggle_label_font_type",
                "$options_dropdown_toggle_label_shadow|default": false,
                "shadow": "$options_dropdown_toggle_label_shadow",
                "alpha": "$content_alpha",

                "$options_dropdown_toggle_label_binding_type|default": "global",
                "$options_dropdown_toggle_label_binding_collection_name|default": "",
                "$options_dropdown_label_bindings|default": [
                  {
                    "binding_name": "$options_dropdown_toggle_label_binding",
                    "binding_condition": "none",
                    "binding_type": "$options_dropdown_toggle_label_binding_type",
                    "binding_collection_name": "$options_dropdown_toggle_label_binding_collection_name"
                  },
                  {
                    "binding_name": "$options_dropdown_label_color_binding",
                    "binding_type": "$options_dropdown_label_color_binding_type",
                    "binding_name_override": "#color"
                  }
                ],

                "bindings": "$options_dropdown_label_bindings"
              }
            }
          ]
        }
      },
      {
        "arrow_panel": {
          "type": "panel",
          "layer": 1,
          "size": [ "100%c", "100%" ],
          "controls": [
            {
              "dropdown_chevron_image@dropdown_chevron_image": {}
            }
          ]
        }
      },
      {
        "right_padding@common.empty_panel": {
          "size": "$options_dropdown_toggle_right_padding"
        }
      }
    ]
  }
}