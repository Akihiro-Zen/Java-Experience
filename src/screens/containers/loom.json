/* By @FMarquesPTO. All rights reserved. */
{
  "namespace": "loom_mcjava",

  "loom_screen_content_panel@container_mcjava.base_panel": {
    "$container_bg": "loom_mcjava.loom_container_bg",
    "$specified_content": "loom_mcjava.loom_content_panel",
    "$texture_src": "assets/minecraft/textures/gui/container/loom"
  },

  "loom_content_panel": {
    "type": "panel",
    "controls": [
      { "title@container_mcjava.title": { "offset": [7, 4], "text": "container.loom" } },
      { "input@loom_mcjava.input_item_slot": {} },
      { "dye@loom_mcjava.dye_item_slot": {} },
      { "material@loom_mcjava.material_item_slot": {} },
      { "scroll_panel@loom_mcjava.scroll_panel": {} },
      { "locked_scrollbox_bg@loom_mcjava.locked_scrollbox_bg": {} },
      { "result_banner_renderer@loom_mcjava.result_banner_renderer": {} },
      { "result@loom_mcjava.result_item_slot": {} }
    ]
  },

  "scroll_panel": {
    "type": "panel",
    "size": [ 71, 56],
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "offset": [60, 13],
    "controls": [
      {
        "scroll_panel@container_mcjava.container_scroll_panel": {
          "size": [ 71, 56],
          "anchor_to": "top_left",
          "anchor_from": "top_left",
          "$scrolling_panel_anchor": "top_left",
          "$scrolling_content": "loom_mcjava.scroll_grid_panel",
          "$collection_name": "patterns",
          "$scroll_bar_size": [12, "100%" ],
          "$scroll_bar_offset|default": [29.5, 0 ],
          "$scroll_box_image_control": "loom_mcjava.scroll_box",
          "$scroll_track_image_control": "loom_mcjava.scroll_track",
          "bindings": [
            {
              "binding_name": "(not #empty_image_visible)",
              "binding_name_override": "#visible",
              "binding_type": "collection",
              "binding_collection_name": "loom_dye_items"
            }
          ]
        }
      }
    ],
    "bindings": [
      {
        "binding_name": "(not #empty_image_visible)",
        "binding_name_override": "#visible",
        "binding_type": "collection",
        "binding_collection_name": "loom_input_items"
      }
    ]
  },

  /* Content */

  /* Images */

  "loom_container_bg@common_mcjava.image": {
    "size": [176, 166],
    "uv": [0, 0],
    "variables": [
      { "requires": "($loom_resolution = 256x)", "$1": [176, 166] },
      { "requires": "($loom_resolution = 512x)", "$1": [352, 332] },
      { "requires": "($loom_resolution = 1024x)", "$1": [704, 664] },
      { "requires": "($loom_resolution = 2048x)", "$1": [1408, 1328] },
      { "requires": "($loom_resolution = 4096x)", "$1": [2816, 2656] }
    ]
  },

  "banner_empty_image@loom_mcjava.item_empty_image": {
    "variables": [
      { "requires": "($loom_resolution = 256x)", "$0": [176, 0], "$1": [16, 16] },
      { "requires": "($loom_resolution = 512x)", "$0": [352, 0], "$1": [32, 32] },
      { "requires": "($loom_resolution = 1024x)", "$0": [704, 0], "$1": [64, 64] },
      { "requires": "($loom_resolution = 2048x)", "$0": [1408, 0], "$1": [128, 128] },
      { "requires": "($loom_resolution = 4096x)", "$0": [2816, 0], "$1": [256, 256] }
    ]
  },

  "dye_empty_image@loom_mcjava.item_empty_image": {
    "variables": [
      { "requires": "($loom_resolution = 256x)", "$0": [192, 0], "$1": [16, 16] },
      { "requires": "($loom_resolution = 512x)", "$0": [384, 0], "$1": [32, 32] },
      { "requires": "($loom_resolution = 1024x)", "$0": [768, 0], "$1": [64, 64] },
      { "requires": "($loom_resolution = 2048x)", "$0": [1536, 0], "$1": [128, 128] },
      { "requires": "($loom_resolution = 4096x)", "$0": [3072, 0], "$1": [256, 356] }
    ]
  },

  "pattern_item_empty_image@loom_mcjava.item_empty_image": {
    "variables": [
      { "requires": "($loom_resolution = 256x)", "$0": [208, 0], "$1": [16, 16] },
      { "requires": "($loom_resolution = 512x)", "$0": [416, 0], "$1": [32, 32] },
      { "requires": "($loom_resolution = 1024x)", "$0": [832, 0], "$1": [64, 64] },
      { "requires": "($loom_resolution = 2048x)", "$0": [1664, 0], "$1": [128, 128] },
      { "requires": "($loom_resolution = 4096x)", "$0": [3328, 0], "$1": [256, 256] }
    ]
  },

  "locked_scrollbox_bg@common_mcjava.image": {
    "size": [12, 15],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "offset": [119, 13],
    "variables": [
      { "requires": "($loom_resolution = 256x)", "$0": [244, 0], "$1": [12, 15] },
      { "requires": "($loom_resolution = 512x)", "$0": [488, 0], "$1": [24, 30] },
      { "requires": "($loom_resolution = 1024x)", "$0": [976, 0], "$1": [48, 60] },
      { "requires": "($loom_resolution = 2048x)", "$0": [1952, 0], "$1": [96, 120] },
      { "requires": "($loom_resolution = 4096x)", "$0": [3904, 0], "$1": [192, 240] }
    ]
  },

  "scroll_box": {
    "type": "panel",
    "controls": [
      {
        "scroll_box@common_mcjava.image": {
    
          "size": [12, 15],
          "anchor_from": "top_right",
          "anchor_to": "top_right",
          "variables": [
            { "requires": "($loom_resolution = 256x)", "$0": [232, 0], "$1": [12, 15] },
            { "requires": "($loom_resolution = 512x)", "$0": [464, 0], "$1": [24, 30] },
            { "requires": "($loom_resolution = 1024x)", "$0": [928, 0], "$1": [48, 60] },
            { "requires": "($loom_resolution = 2048x)", "$0": [1856, 0], "$1": [96, 120] },
            { "requires": "($loom_resolution = 4096x)", "$0": [3712, 0], "$1": [192, 240] }
          ]
        }
      }
    ]
  },

  "scroll_track@common_mcjava.image": {
    "size": [12, 56],
    "offset": [0, 0],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "variables": [
      { "requires": "($loom_resolution = 256x)", "$0": [119, 13], "$1": [12, 56] },
      { "requires": "($loom_resolution = 512x)", "$0": [238, 26], "$1": [24, 112] },
      { "requires": "($loom_resolution = 1024x)", "$0": [476, 52], "$1": [48, 224] },
      { "requires": "($loom_resolution = 2048x)", "$0": [952, 104], "$1": [96, 448] },
      { "requires": "($loom_resolution = 4096x)", "$0": [1104, 208], "$1": [192, 896] }
    ]
  },

  "pattern_cell_image@common_mcjava.image": {
    "size": [14, 14],
    "layer": 1,
    "variables": [
      { "requires": "($loom_resolution = 256x)", "$0": [0, 166], "$1": [14, 14] },
      { "requires": "($loom_resolution = 512x)", "$0": [0, 332], "$1": [28, 28] },
      { "requires": "($loom_resolution = 1024x)", "$0": [0, 664], "$1": [56, 56] },
      { "requires": "($loom_resolution = 2048x)", "$0": [0, 1328], "$1": [112, 112] },
      { "requires": "($loom_resolution = 4096x)", "$0": [0, 2656], "$1": [224, 224] }
    ]
  },

  "pattern_hover_cell_image@common_mcjava.image": {
    "size": [14, 14],
    "layer": 1,
    "variables": [
      { "requires": "($loom_resolution = 256x)", "$0": [0, 194], "$1": [14, 14] },
      { "requires": "($loom_resolution = 512x)", "$0": [0, 388], "$1": [28, 28] },
      { "requires": "($loom_resolution = 1024x)", "$0": [0, 776], "$1": [56, 56] },
      { "requires": "($loom_resolution = 2048x)", "$0": [0, 1552], "$1": [112, 112] },
      { "requires": "($loom_resolution = 4096x)", "$0": [0, 3104], "$1": [224, 224] }
    ]
  },

  "pattern_pressed_cell_image@common_mcjava.image": {
    "size": [14, 14],
    "layer": 1,
    "variables": [
      { "requires": "($loom_resolution = 256x)", "$0": [0, 180], "$1": [14, 14] },
      { "requires": "($loom_resolution = 512x)", "$0": [0, 360], "$1": [28, 28] },
      { "requires": "($loom_resolution = 1024x)", "$0": [0, 720], "$1": [56, 56] },
      { "requires": "($loom_resolution = 2048x)", "$0": [0, 1440], "$1": [112, 112] },
      { "requires": "($loom_resolution = 4096x)", "$0": [0, 2880], "$1": [224, 224] }
    ]
  },

  /* Content */

  "result_slot_button@container_mcjava.no_coalesce_container_slot_button": {
    "button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.loom_result_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "button.loom_result_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "button.loom_result_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_select",
        "to_button_id": "button.loom_result_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_auto_place",
        "to_button_id": "button.container_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_secondary_select",
        "to_button_id": "button.container_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop",
        "to_button_id": "button.drop_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop_all",
        "to_button_id": "button.drop_all",
        "mapping_type": "pressed"
      },
      {
        "to_button_id": "button.container_slot_hovered",
        "mapping_type": "pressed"
      }
    ]
  },

  "input_item_slot@container_mcjava.container_slot": {
    "offset": [12, 25],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "$item_collection_name": "loom_input_items",
    "$cell_overlay_ref": "loom_mcjava.banner_empty_image"
  },

  "dye_item_slot@container_mcjava.container_slot": {
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "offset": [32, 25],
    "$item_collection_name": "loom_dye_items",
    "$cell_overlay_ref": "loom_mcjava.dye_empty_image"
  },

  "material_item_slot@container_mcjava.container_slot": {
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "offset": [22, 44],
    "$item_collection_name": "loom_material_items",
    "$cell_overlay_ref": "loom_mcjava.pattern_item_empty_image",
    "$item_renderer_binding_condition": "always_when_visible",
    "$cell_images_binding_condition": "always_when_visible"
  },

  "result_item_slot@container_mcjava.container_slot": {
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "offset": [142, 56],
    "$item_collection_name": "loom_result_items",
    "$button_ref": "loom_mcjava.result_slot_button"
  },

  "item_empty_image@common_mcjava.image": {
    "layer": 2,
    "size": [ 16, 16 ],
    "anchor_from": "center",
    "anchor_to": "center",
    "bindings": [
      {
        "binding_name": "#empty_image_visible",
        "binding_name_override": "#visible",
        "binding_type": "collection",
        "binding_collection_name": "$item_collection_name"
      }
    ]
  },

  "result_banner_renderer": {
    "type": "custom",
    "renderer": "banner_pattern_renderer",
    "size": [ 20, 40 ],
    "offset": [141, 8],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "bindings": [
      {
        "binding_name": "#result_patterns",
        "binding_name_override": "#banner_patterns",
        "binding_condition": "always_when_visible"
      },
      {
        "binding_name": "#result_colors",
        "binding_name_override": "#banner_colors",
        "binding_condition": "always_when_visible"
      }
    ]
  },

  "hover_highlight_slot_panel": {
    "type": "panel",
    "controls": [
      { "bg@pattern_hover_cell_image": {} }
    ]
  },

  "pressed_highlight_slot_panel": {
    "type": "panel",
    "controls": [
      { "bg@pattern_pressed_cell_image": {} }
    ]
  },

  "pattern_slot_button": {
    "type": "button",
    /* Focus */
    "$focus_id|default": "",
    "$focus_down|default": "",
    "$focus_up|default": "",
    "$focus_left|default": "",
    "$focus_right|default": "",
    "$focus_id_binding_type|default": "collection",
    "$focus_down_binding_type|default": "collection",
    "$focus_up_binding_type|default": "collection",
    "$focus_left_binding_type|default": "collection",
    "$focus_right_binding_type|default": "collection",
    "focus_identifier": "$focus_id",
    "focus_change_down": "$focus_down",
    "focus_change_up": "$focus_up",
    "focus_change_left": "$focus_left",
    "focus_change_right": "$focus_right",
    "focus_enabled": true,
    "focus_wrap_enabled": false,
    "focus_magnet_enabled": true,

    "$hover_highlight_control|default": "loom_mcjava.hover_highlight_slot_panel",
    "$pressed_highlight_control|default": "loom_mcjava.pressed_highlight_slot_panel",
    "sound_name": "ui.loom.select_pattern",
    "sound_volume": 1.0,
    "sound_pitch": 1.0,
    "default_focus_precedence": 1,
    "hover_control": "hover",
    "pressed_control": "pressed",
    "layer": 1,
    "bindings": [
      {
        "binding_type": "collection_details",
        "binding_collection_name": "$collection_name",
        "binding_condition": "once"
      },
      {
        "binding_type": "$focus_id_binding_type",
        "binding_name": "#focus_identifier",
        "binding_name_override": "#focus_identifier",
        "binding_collection_name": "$collection_name",
        "binding_condition": "once"
      },
      {
        "binding_type": "$focus_down_binding_type",
        "binding_name": "#focus_change_down",
        "binding_name_override": "#focus_change_down",
        "binding_collection_name": "$collection_name",
        "binding_condition": "once"
      },
      {
        "binding_type": "$focus_up_binding_type",
        "binding_name": "#focus_change_up",
        "binding_name_override": "#focus_change_up",
        "binding_collection_name": "$collection_name",
        "binding_condition": "once"
      },
      {
        "binding_type": "$focus_left_binding_type",
        "binding_name": "#focus_change_left",
        "binding_name_override": "#focus_change_left",
        "binding_collection_name": "$collection_name",
        "binding_condition": "once"
      },
      {
        "binding_type": "$focus_right_binding_type",
        "binding_name": "#focus_change_right",
        "binding_name_override": "#focus_change_right",
        "binding_collection_name": "$collection_name",
        "binding_condition": "once"
      }
    ],
    "button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.pattern_select",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "button.pattern_select",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "button.pattern_select",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_select",
        "to_button_id": "button.pattern_select",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_auto_place",
        "to_button_id": "button.pattern_select",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_secondary_select",
        "to_button_id": "button.pattern_select",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop",
        "to_button_id": "button.pattern_select",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop_all",
        "to_button_id": "button.pattern_select",
        "mapping_type": "pressed"
      },
      {
        "to_button_id": "button.container_slot_hovered",
        "mapping_type": "pressed"
      }
    ],
    "controls": [
      { "hover@$hover_highlight_control": {} },
      { "pressed@$pressed_highlight_control": {} }
    ]
  },

  "banner_pattern": {
    "type": "custom",
    "renderer": "banner_pattern_renderer",
    "size": [ 5, 10 ],
    "bindings": [
      {
        "binding_name": "#banner_patterns",
        "binding_type": "collection",
        "binding_collection_name": "$collection_name"
      },
      {
        "binding_name": "#banner_colors",
        "binding_type": "collection",
        "binding_collection_name": "$collection_name"
      }
    ]
  },


  "pattern_button": {
    "layer": 2,
    "type": "input_panel",
    "size": [ 14, 14 ],
    "$button_ref|default": "loom_mcjava.pattern_slot_button",
    "$banner_pattern_ref|default": "loom_mcjava.banner_pattern",
    "$background_images|default": "loom_mcjava.pattern_cell_image",
    "$background_image_control_name|default": "bg",
    "controls": [
      { "$background_image_control_name@$background_images": { "layer": 1 } },
      {
        "banner_pattern@$banner_pattern_ref": {
          "offset": [1, 0],
          "layer": 6
        }
      },
      { "item_button_ref@$button_ref": {} }
    ]
  },

  "scroll_grid": {
    "type": "grid",
    "size": [ "100%", "default" ],
    "layer": 1,
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "$binding_condition|default": "visible",
    "$grid_item_template|default": "loom_mcjava.pattern_button",
    "collection_name": "$collection_name",
    "grid_rescaling_type": "horizontal",
    "grid_item_template": "$grid_item_template",
    "bindings": [
      {
        "binding_name": "#pattern_selector_total_items",
        "binding_name_override": "#maximum_grid_items",
        "binding_condition": "$binding_condition",
        "binding_type": "collection",
        "binding_collection_name": "$collection_name"
      }
    ]
  },

  "scroll_grid_panel@common.root_panel": {
    "type": "input_panel",
    "size": [ "100% - 15px", "100%c" ],
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "controls": [
      { "grid@loom_mcjava.scroll_grid": {} }
    ]
  }
}