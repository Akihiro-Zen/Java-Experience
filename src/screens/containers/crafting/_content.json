/* By @FMarquesPTO. All rights reserved. */
{
  "namespace": "crafting_content_mcjava",

  "crafting_text": {
    "type": "label",
    "text": "container.crafting",
    "color": [ 0.25, 0.25, 0.25 ],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "layer": 10
  },

  "armor_overlay": {
    "type": "image",
    "layer": 2,
    "anchor_from": "center",
    "anchor_to": "center",
    "size": [ 16, 16 ],
    "bindings": [
      {
        "binding_name": "#empty_armor_image_visible",
        "binding_name_override": "#visible",
        "binding_type": "collection",
        "binding_collection_name": "$item_collection_name"
      }
    ]
  },

  "offhand_overlay": {
    "type": "image",
    "layer": 2,
    "anchor_from": "center",
    "anchor_to": "center",
    "size": [ 16, 16 ],
    "bindings": [
      {
        "binding_name": "#empty_offhand_image_visible",
        "binding_name_override": "#visible",
        "binding_type": "collection",
        "binding_collection_name": "$item_collection_name"
      }
    ]
  },

  "armor_overlay_helmet@armor_overlay": {
    "texture": "assets/minecraft/textures/item/empty_armor_slot_helmet"
  },

  "armor_overlay_chest@armor_overlay": {
    "texture": "assets/minecraft/textures/item/empty_armor_slot_chestplate"
  },

  "armor_overlay_legs@armor_overlay": {
    "texture": "assets/minecraft/textures/item/empty_armor_slot_leggings"
  },

  "armor_image_feet@armor_overlay": {
    "texture": "assets/minecraft/textures/item/empty_armor_slot_boots"
  },

  "armor_overlay_shield@offhand_overlay": {
    "texture": "assets/minecraft/textures/item/empty_armor_slot_shield"
  },

  "crafting_input_grid_item@crafting_content_mcjava.inventory_container_item": {
    "$item_collection_name": "crafting_input_items",
    "$background_images": "crafting_content_mcjava.crafting_container_cell_images",
    "$item_renderer_binding_condition": "always",
    "$button_ref": "crafting_content_mcjava.inventory_container_slot_button"
  },

  "inventory_container_slot_button@container_mcjava.container_slot_button_prototype": {
    "$button_take_half_place_one|default": "button.container_take_half_place_one",
    "$button_auto_place|default": "button.container_auto_place",
    "$button_take_all_place_all|default": "button.container_take_all_place_all",
    "$coalesce_button|default": "button.coalesce_stack",
    "$item_painting_button|default": "button.shape_drawing",
    "button_mappings": [
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "button.try_menu_exit",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$button_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$button_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "$button_take_half_place_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_select",
        "to_button_id": "$button_take_half_place_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_auto_place",
        "to_button_id": "$button_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_secondary_select",
        "to_button_id": "$button_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop",
        "to_button_id": "button.drop_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop_all",
        "to_button_id": "button.drop_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$coalesce_button",
        "mapping_type": "double_pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$coalesce_button",
        "mapping_type": "double_pressed"
      },
      {
        "to_button_id": "$item_painting_button",
        "mapping_type": "pressed"
      },
      {
        "to_button_id": "button.container_slot_hovered",
        "mapping_type": "pressed"
      }
    ]
  },

  "no_coalesce_container_slot_button@crafting_content_mcjava.inventory_container_slot_button": {
    "modifications": [
      {
        "array_name": "button_mappings",
        "operation": "insert_front",
        "button_mappings": [
          {
            "ignored": "$is_output",
            "from_button_id": "button.menu_select",
            "to_button_id": "$button_auto_place",
            "mapping_type": "double_pressed"
          },
          {
            "ignored": "$is_output",
            "from_button_id": "button.menu_ok",
            "to_button_id": "$button_auto_place",
            "mapping_type": "double_pressed"
          }
        ]
      }
    ],
    "button_mappings": [
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "button.try_menu_exit",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$button_take_half_place_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$button_take_half_place_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_secondary_select",
        "to_button_id": "$button_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_select",
        "to_button_id": "$button_take_all_place_all",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_auto_place",
        "to_button_id": "$button_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.controller_secondary_select",
        "to_button_id": "$button_auto_place",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop",
        "to_button_id": "button.drop_one",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_inventory_drop_all",
        "to_button_id": "button.drop_all",
        "mapping_type": "pressed"
      },
      {
        "to_button_id": "button.shape_drawing",
        "mapping_type": "pressed"
      },
      {
        "to_button_id": "button.container_slot_hovered",
        "mapping_type": "pressed"
      }
    ]
  },

  "inventory_container_item@container_mcjava.container_slot": {
    "$button_ref|default": "crafting_content_mcjava.inventory_container_slot_button",
    "$background_images|default": "crafting_content_mcjava.container_cell_images",
    "$overlay_images|default": "crafting.container_overlay_images",
    "$overlay_image_control_name|default": "overlay",
    "controls": [
      {
        "item_cell": {
          "type": "panel",
          "size": "$cell_image_size",
          "controls": [
            { "$background_image_control_name@$background_images": { "layer": 1 } },
            {
              "item": {
                "type": "panel",
                "size": "$item_renderer_panel_size",
                "controls": [
                  { "stack_count_label@common.stack_count_label": { "layer": 8 } },
                  {
                    "$item_renderer@$item_renderer": {
                      "size": "$item_renderer_size",
                      "offset": "$item_renderer_offset",
                      "anchor_to": "center",
                      "anchor_from": "center",
                      "layer": 5
                    }
                  }
                ]
              }
            },
            { "durability_bar@common.durability_bar": { "layer": 6 } },
            { "$overlay_image_control_name@$overlay_images": { "layer": 7 } }
          ]
        }
      },
      { "item_cell_overlay_ref@$cell_overlay_ref": { "layer": 2 } },
      { "item_button_ref@$button_ref": { "layer": 4 } }
    ]
  },

  "output_no_coalesce_container_slot_button@crafting_content_mcjava.no_coalesce_container_slot_button": {
    "$is_output": true,
    "$button_take_all_place_all": "button.crafting_output_primary",
    "$button_take_half_place_one": "button.crafting_output_secondary",
    "$button_auto_place": "button.crafting_output_tertiary"
  },
  
  "container_cell_images": {
    "type": "panel",
    "$cell_images_binding_condition|default": "visible",
    "controls": [
      { "cell_classic@crafting_content_mcjava.cell_image_classic": {} },
      { "cell_normal@crafting_content_mcjava.cell_image_normal": {} },
      { "cell_invert@crafting_content_mcjava.cell_image_invert": {} },
      { "cell_red@crafting_content_mcjava.cell_image_red": {} },
      { "cell_selected@crafting_content_mcjava.cell_image_selected": {} },
      { "cell_hint@game_tip.cell_image_classic_hint": {} }
    ],
    "bindings": [
      {
        "binding_name": "#container_item_background",
        "binding_type": "collection",
        "binding_collection_name": "$item_collection_name",
        "binding_condition": "$cell_images_binding_condition"
      }
    ]
  },

  "crafting_container_cell_images@crafting_content_mcjava.container_cell_images": {
    "$cell_images_binding_condition": "always"
  },

  "cell_image": {
    "type": "image"
  },

  "cell_image_classic@crafting_content_mcjava.cell_image": {
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 0)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_normal@crafting_content_mcjava.cell_image": {
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 1)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_invert@crafting_content_mcjava.cell_image": {
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 2)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_red@crafting_content_mcjava.cell_image": {
    "controls": [
      {
        "red@crafting_content_mcjava.cell_image": {
          "texture": "src/assets/img/white",
          "$red_cell_size|default": [ "100% - 2px", "100% - 2px" ],
          "size": "$red_cell_size",
          "anchor_to": "center",
          "anchor_from": "center",
          "color": "$red_highlight_slot_color",
          "alpha": 0.35,
          "layer": 2
        }
      }
    ],
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 3)",
        "target_property_name": "#visible"
      }
    ]
  },

  "cell_image_selected@crafting_content_mcjava.cell_image": {
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "$background_image_control_name",
        "resolve_sibling_scope": true,
        "source_property_name": "(#container_item_background = 4)",
        "target_property_name": "#visible"
      }
    ]
  }
}