/* By @FMarquesPTO. All rights reserved. */
{
  "namespace": "filter_menu_mcjava",

  "filter_menu_screen_content_panel@common.modal_area_panel_base": {
    "layer": 100,
    "$inventory_sort_and_filter_disabled|default": true,
    "$menu_cancel_button_id": "button.close_filter_menu",
    "$close_bg_exit_button_name": "button.exit_filter_menu",
    "controls": [
      { "filter_main_panel@filter_menu_mcjava.filter_menu_content_panel": {} },
      { "background@store_content_mcjava.exit_background": {} }
    ],
    "bindings": [
      {
        "binding_name": "#filter_screen_visible",
        "binding_name_override": "#modal"
      }
    ]
  },
  
  "filter_menu_content_panel": {
    "type": "stack_panel",
    "orientation": "vertical",
    "size": [150, "100%" ],
    "anchor_to": "top_middle",
    "anchor_from": "top_middle",
    "offset": [180, 19],
    "layer": 2,
    "$filter_button_panel_size|default": [ "100%", 30 ],
    "$filter_button_size|default": [ "100% - 16px", "100%" ],
    "controls": [
      {
        "top_padding": {
          "type": "panel",
          "size": [ "100%", 20 ],
          "controls": [
            { "filter_title_bar_panel@filter_menu_mcjava.filter_title_bar": {} },
            {
              "filter_clear_button_panel": {
                "type": "panel",
                "size": [20, 20 ],
                "anchor_to": "top_left",
                "anchor_from": "top_left",
                "offset": [22, 0],
                "$filter_clear_button_text|default": "store.search.filters.clear",
                "$filter_clear_button_pressed_name|default": "button.clear_all_filters",
                "property_bag": {
                  "#visible": false
                },
                "bindings": [
                  {
                    "binding_name": "#main_filter_section_visible",
                    "binding_name_override": "#visible"
                  }
                ],
                "controls": [
                  {
                    "clear_button@button_mcjava.button": {
                      "size": [20, 20 ],
                      "anchor_to": "top_left",
                      "anchor_from": "top_left",
                      "$button_content": "world_cheats_mcjava.reset_image",
                      "$pressed_button_name": "$filter_clear_button_pressed_name"
                    }
                  }
                ],
                "variables": [
                  {
                    "requires": "$is_inventory_screen",
                    "$filter_clear_button_text": "store.search.filters.reset"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "filter_menu_content": {
          "type": "panel",
          "size": [ "100%", "fill" ],
          "controls": [
            {
              "filter_main_menu_screen@filter_menu_mcjava.filter_main_menu_section": {}
            },
            {
              "filter_offer_type_screen@filter_menu.filter_offer_type_section": {}
            },
            {
              "filter_pack_type_screen@filter_menu_mcjava.filter_pack_type_section": {}
            },
            {
              "filter_minecoin_section@filter_menu.filter_type_section": {
                "$filter_sort_prefix": "minecoin",
                "$filter_sections_content_panel_visible": "#minecoin_filter_section_visible"
              }
            },
            {
              "filter_rating_section@filter_menu_mcjava.filter_type_section": {
                "$filter_sort_prefix": "rating",
                "$filter_sections_content_panel_visible": "#rating_filter_section_visible"
              }
            },
            {
              "filter_creator_section@filter_menu_mcjava.filter_type_section": {
                "$filter_sort_prefix": "creator",
                "$filter_sections_content_panel_visible": "#creator_filter_section_visible"
              }
            },
            {
              "filter_installed_state_section@filter_menu_mcjava.filter_type_section": {
                "ignored": "(not $is_inventory_screen)",
                "$filter_sort_prefix": "installed_state",
                "$filter_sections_content_panel_visible": "#installed_state_filter_section_visible"
              }
            }
          ]
        }
      }
    ]
  },

  "filter_title_bar@button_mcjava.button": {
    "type": "button",
    "size": [20, 20],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "$button_content": "store_content_mcjava.filter_logo_image",
    "$pressed_button_name": "button.close_sort_menu",
    "layer": 1
  },

  /* Main Section */

  "filter_main_menu_options_button_panel@filter_menu_mcjava.filter_options_button_panel": {
    "visible": false,
    "property_bag": {
      "#visible": false
    },
    "bindings": [
      {
        "binding_name": "('#filter_option_visible_' + $filter_sort_prefix)",
        "binding_name_override": "#visible"
      }
    ]
  },

  "filter_options_button_panel": {
    "type": "panel",
    "size": [150, 20],
    "controls": [
      {
        "filter_variables_panel@filter_menu.filter_variables_panel": {
          "controls": [
            {
              "filter_options_button@button_mcjava.button": {
                "size": [150, 20],
                "anchor_from": "right_middle",
                "anchor_to": "right_middle",
                "$button_content": "filter_menu_mcjava.filter_option_button_content"
              }
            }
          ]
        }
      }
    ]
  },

  "filter_option_button_content": {
    "type": "stack_panel",
    "orientation": "horizontal",
    "size": [ "100% - 12px", "100% - 4px" ],
    "controls": [
      {
        "left_chevron_icon_panel@filter_menu_mcjava.chevron_icon_panel": {
          "ignored": "$is_main_menu",
          "$chevron_anchor": "center",
          "$chevron_icon": "src/assets/img/chevron_left"
        }
      },
      {
        "filter_type_and_selected_panel": {
          "type": "stack_panel",
          "orientation": "vertical",
          "size": [ "fill", "100%" ],
          "controls": [
            {
              "top_padding": {
                "type": "panel",
                "size": [ "100%", "fill" ]
              }
            },
            {
              "filter_type_label": {
                "type": "label",
                "size": [ "100%", 10 ],
                "text": "$filter_type_label",
                "color": "$text_color",
                "shadow": true
              }
            },
            {
              "bottom_padding": {
                "type": "panel",
                "size": [ "100%", "fill" ]
              }
            }
          ]
        }
      },
      {
        "right_chevron_icon_panel@filter_menu_mcjava.chevron_icon_panel": {
          "ignored": "(not $is_main_menu)",
          "$chevron_anchor": "center",
          "$chevron_icon": "src/assets/img/chevron_right"
        }
      }
    ]
  },

  "chevron_icon_panel": {
    "type": "panel",
    "size": [ 20, "100%" ],
    "controls": [
      {
        "chevron_icon": {
          "type": "image",
          "size": [ 20, 20 ],
          "anchor_from": "$chevron_anchor",
          "anchor_to": "$chevron_anchor",
          "texture": "$chevron_icon"
        }
      }
    ]
  },

  "filter_main_menu_section@filter_menu.filter_section_content_panel": {
    "$is_main_menu": true,
    "$filter_section_screen_content": "filter_menu_mcjava.filter_main_menu_content",
    "$filter_sections_content_panel_visible": "#main_filter_section_visible"
  },

  "filter_main_menu_content": {
    "type": "stack_panel",
    "orientation": "vertical",
    "size": [ "100%", "100%c" ],
    "anchor_to": "top_right",
    "anchor_from": "top_right",
    "controls": [
      {
        "offer_type_button@filter_menu_mcjava.filter_main_menu_options_button_panel": {
          "$filter_sort_prefix": "offer_type",
          "$filter_type_label": "store.search.filter.offer_type",
          "$filter_selected_text": "#filter_selected_offer_type",
          "$filter_selected_label_visible_binding_name": "#filter_offer_type_selected_visible",
          "$pressed_button_name": "button.filter_offer_type"
        }
      },
      {
        "pack_type_button@filter_menu_mcjava.filter_main_menu_options_button_panel": {
          "$filter_sort_prefix": "pack_type",
          "$filter_type_label": "store.search.filter.pack_type",
          "$filter_selected_text": "#filter_selected_packtype",
          "$filter_selected_label_visible_binding_name": "#filter_packtype_selected_visible",
          "$pressed_button_name": "button.filter_pack_type"
        }
      },
      {
        "minecoin_button@filter_menu_mcjava.filter_main_menu_options_button_panel": {
          "ignored": "($is_inventory_screen or $is_on_3p_server)",
          "$filter_sort_prefix": "minecoin"
        }
      },
      {
        "rating_button@filter_menu_mcjava.filter_main_menu_options_button_panel": {
          "ignored": "($is_inventory_screen or $is_on_3p_server)",
          "$filter_sort_prefix": "rating"
        }
      },
      {
        "creator_button@filter_menu_mcjava.filter_main_menu_options_button_panel": {
          "ignored": "$is_on_3p_server",
          "$filter_sort_prefix": "creator"
        }
      },
      {
        "installed_state_button@filter_menu_mcjava.filter_main_menu_options_button_panel": {
          "ignored": "(not $is_inventory_screen)",
          "$filter_sort_prefix": "installed_state"
        }
      },
      {
        "filter_main_menu_filter_toggles_section": {
          "type": "panel",
          "size": [ "100%", "100%c" ],
          "$filter_sort_prefix": "main_menu_filter_toggles",
          "$filter_sort_grid_item": "filter_menu_mcjava.filter_checkbox_no_icon_toggle",
          "$filter_sections_content_panel_visible": "#non_dropdown_filter_section_visible",
          "controls": [
            {
              "filter_main_menu_filter_toggle_grid_panel@store_content_mcjava.filter_sort_grid_panel": {
                "size": [ "100%", "100%c" ],
                "anchor_to": "right_middle",
                "anchor_from": "right_middle"
              }
            }
          ]
        }
      }
    ]
  },

  "filter_checkbox_toggle@store_content_mcjava.filter_sort_toggle": {
    "size": [150, 20],
    "$button_content": "store_content_mcjava.filter_sort_toggle_content"
  },

  "filter_checkbox_no_icon_toggle@store_content_mcjava.filter_sort_toggle": {
    "size": [150, 20],
    "$button_content": "store_content_mcjava.filter_sort_toggle_content",
    "$ignore_content_toggle_image": true
  },

  /* Pack Type */

  "filter_pack_type_section@filter_menu.filter_section_content_panel": {
    "$is_main_menu": false,
    "$filter_sort_prefix": "pack_type",
    "$filter_section_screen_content": "filter_menu_mcjava.filter_section_content",
    "$filter_sections_content_panel_visible": "#pack_type_filter_section_visible",
    "$filter_type_label": "store.search.filter.pack_type",
    "$filter_selected_text": "#filter_selected_packtype",
    "$filter_selected_label_visible_binding_name": "#filter_packtype_selected_visible",
    "$filter_clear_button_text": "store.search.filter.clear.pack_type",
    "$filter_clear_button_pressed_name": "button.clear_pack_type_filters",
    "$filter_section_sub_menu_panel": "filter_menu_mcjava.pack_type_sub_menu_panel"
  },

  "filter_section_content": {
    "type": "stack_panel",
    "size": [ "100%", "100%c" ],
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "controls": [
      {
        "filter_section_content": {
          "type": "panel",
          "size": [ "100%", 20],
          "anchor_to": "top_left",
          "anchor_from": "top_left",
          "controls": [
            {
              "section_title_button@filter_menu_mcjava.filter_options_button_panel": {
                "$filter_button_size": [ "100%", "100%" ],
                "$pressed_button_name": "button.close_filter_menu"
              }
            },
            {
              "filter_clear_button_panel": {
                "type": "panel",
                "size": [20, 20 ],
                "anchor_to": "top_left",
                "anchor_from": "top_left",
                "offset": [22, -20],
                "$filter_clear_button_text|default": "store.search.filters.clear",
                "$filter_clear_button_pressed_name|default": "button.clear_all_filters",
                "property_bag": {
                  "#visible": false
                },
                "controls": [
                  {
                    "clear_button@button_mcjava.button": {
                      "size": [20, 20 ],
                      "anchor_to": "top_left",
                      "anchor_from": "top_left",
                      "$button_content": "world_cheats_mcjava.reset_image",
                      "$pressed_button_name": "$filter_clear_button_pressed_name"
                    }
                  }
                ],
                "variables": [
                  {
                    "requires": "$is_inventory_screen",
                    "$filter_clear_button_text": "store.search.filters.reset"
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "section_sub_menu@filter_menu_mcjava.filter_sort_submenu_scrolling_panel_section": {
          "$filter_sort_scrolling_panel_size": "$filter_button_size",
          "$scrolling_content": "$filter_section_sub_menu_panel"
        }
      }
    ]
  },

  "filter_sort_submenu_scrolling_panel_section": {
    "type": "panel",
    "size": [ "100%", "fill" ],
    "controls": [
      {
        "submenu_scrolling_panel@common.scrolling_panel": {
          "size": [150, "100%"],
          "anchor_from": "top_right",
          "anchor_to": "top_right",
          "$scrolling_pane_offset": [ 0, 0 ],
          "$scroll_size": [ 5, "100% - 4px" ],
          "$scroll_bar_left_padding_size": [ 0, 0 ],
          "$bar_visible": false,
          "$show_background": false
        }
      }
    ]
  },

  "pack_type_sub_menu_panel": {
    "type": "panel",
    "size": [ "100%", "100%c" ],
    "controls": [
      {
        "pack_type_sub_menu": {
          "type": "stack_panel",
          "orientation": "vertical",
          "size": [ "100%", "100%c" ],
          "anchor_from": "top_right",
          "anchor_to": "top_right",

          "$is_collection": true,
          "$filter_item_toggle_icon": "textures/ui/chevron_grey_right",
          "$toggle_grid_collection_name": "($filter_sort_prefix + '_collection')",
          "collection_name": "($filter_sort_prefix + '_collection')",

          "controls": [
            {
              "skin_packs_filter@store_content_mcjava.filter_checkbox_toggle": {
                "collection_index": 0,
                "$content_toggle_image": "textures/ui/mashup_hangar"
              }
            },
            {
              "texture_packs_filter@store_content_mcjava.filter_checkbox_toggle": {
                "collection_index": 1,
                "$content_toggle_image": "textures/ui/mashup_PaintBrush"
              }
            },
            {
              "worlds_template_filter_panel": {
                "type": "stack_panel",
                "orientation": "vertical",
                "size": [ "100%", "100%c" ],
                "$filter_sort_prefix": "world_template",
                "controls": [
                  {
                    "worlds_template_filter@filter_menu_mcjava.filter_checkbox_toggle": {
                      "type": "panel",
                      "size": [150, 20],
                      "$is_collection": false,
                      "$content_toggle_label": "store.search.filter.worldTemplates",
                      "$filter_sort_prefix": "world_template_types",
                      "$checked_toggle_icon": "src/assets/img/chevron_up",
                      "$checked_hover_toggle_icon": "src/assets/img/chevron_up",
                      "$unchecked_toggle_icon": "src/assets/img/chevron_down",
                      "$unchecked_hover_toggle_icon": "src/assets/img/chevron_down"
                    }
                  },
                  {
                    "world_template_type_filters@common_store.filter_sort_grid_panel": {
                      "visible": false,
                      "$filter_sort_grid_size": [ "100%", "default" ],
                      "$filter_sort_grid_item": "filter_menu_mcjava.filter_checkbox_no_icon_toggle",
                      "bindings": [
                        {
                          //"binding_name": "#world_template_type_filters_visible",
                          //"binding_name_override": "#visible"
                          "binding_type": "view",
                          "source_control_name": "this_toggle",
                          "source_property_name": "#toggle_state",
                          "target_property_name": "#visible",
                          "resolve_sibling_scope": true
                        }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "mashup_packs_filter@filter_menu_mcjava.filter_checkbox_toggle": {
                "collection_index": 2,
                "$content_toggle_image": "textures/ui/MashupIcon"
              }
            }
          ]
        }
      }
    ]
  },

   /* Creator Type */

  "filter_type_section@filter_menu.filter_section_content_panel": {
    "$is_main_menu": false,
    "$filter_section_screen_content": "filter_menu_mcjava.filter_section_content_dynamic",
    "$filter_section_sub_menu_panel": "filter_menu_mcjava.filter_sort_grid_panel"
  },

  "filter_section_content_dynamic@filter_menu.filter_variables_panel": {
    "$filter_sort_grid_size": [ "100%", "default" ],
    "$filter_sort_grid_item": "filter_menu_mcjava.filter_checkbox_no_icon_toggle",
    "controls": [
      {
        "filter_section_content@filter_menu_mcjava.filter_section_content": {}
      }
    ]
  },

  "filter_sort_grid_panel": {
    "type": "panel",
    "size": [ "100%", "100%c" ],
    "$filter_sort_grid_size": [ "100%", "default" ],
    "$filter_sort_collection_name": "($filter_sort_prefix + '_collection')",
    "$filter_sort_dimension_binding": "('#' + $filter_sort_collection_name + _grid_dimensions)",
    "controls": [
      {
        "filter_sort_grid": {
          "type": "grid",
          "$filter_sort_grid_size|default": [ "100%", "default" ],
          "size": "$filter_sort_grid_size",
          "anchor_from": "right_middle",
          "anchor_to": "right_middle",
          "grid_item_template": "filter_menu_mcjava.filter_checkbox_toggle",
          "grid_dimension_binding": "$filter_sort_dimension_binding",
          "collection_name": "$filter_sort_collection_name",
          "$toggle_grid_collection_name": "$filter_sort_collection_name",
          "$is_collection": true,
          "bindings": [
            {
              "binding_name": "$filter_sort_dimension_binding"
            }
          ]
        }
      }
    ]
  }
}