/* By @FMarquesPTO. All rights reserved. */
{
  "namespace": "store_home_mcjava",

  "store_home_screen_content_panel": {
    "type": "panel",
    "$title_text": "Marketplace",
    "controls": [
      { "@store_home_mcjava.top_content": {} },
      { "@store_home_mcjava.scrolling": {} },
      { "@store_content_mcjava.bottom_content": {} }
    ]
  },

  "top_content": {
    "type": "panel",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "size": ["100%", 54],
    "$ignore_home": true,
    "$ignore_search": false,
    "controls": [
      { "title@common_mcjava.title": { "offset": [0, 6], "text": "$title_text" } },
      { "status_with_coins@store_content_mcjava.status_with_coins": {} },
      { "categories_button@store_home_mcjava.categories_button": {} },
      { "categories_button@store_home_mcjava.categories_panel": {} }
    ]
  },

  "categories_panel": {
    "type": "stack_panel",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "size": [150, "100%c"],
    "offset": [17, 30],
    "layer": 40,
    "controls": [
      { "categories_button@store_home_mcjava.categories_back_button": {} },
      {
        "store_section_factory": {
          "type": "stack_panel",
          "anchor_from": "top_middle",
          "anchor_to": "top_middle",
          "orientation": "vertical",
          "size": [ "100%", "100%c" ],
          "$store_factory_clipping_event": "factory_section_shown",
          "$store_factory_collection_details": "collection_details",
          "$store_factory_binding_type": "collection",
          "$store_factory_collection_prefix": "factory",
          "$store_factory_collection_name": "factory_collection",
          "$is_realms_plus_screen|default": false,
          "$content_offer_panel_size|default": [ "100% - 48px", "100%" ],
          "$realms_chevron_binding_name|default": "#realms_chevron_visibility",
      
          "factory": {
            "name": "store_section_factory",
            "control_ids": {
              "nav_button_grid": "@store_home_mcjava.nav_button_grid_panel"
            },
            "factory_variables": [
              "$ratings_visible_after_x_reviews",
              "$store_factory_clipping_event",
              "$store_factory_collection_details",
              "$store_factory_collection_prefix",
              "$store_factory_collection_name",
              "$store_factory_binding_type",
              "$is_realms_plus_screen",
              "$content_offer_panel_size",
              "$realms_chevron_binding_name"
            ]
          },
          "collection_name": "$store_factory_collection_name",
          "bindings": [
            {
              "binding_name": "#store_section_content",
              "binding_name_override": "#collection_length"
            }
          ]
        }
      }
    ],
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "categories_view",
        "source_property_name": "#toggle_state",
        "target_property_name": "#visible"
      }
    ]
  },

  "nav_button_grid_panel": {
    "type": "panel",
    "size": [ "100%", "100%c" ],
    "controls": [
      {
        "nav_button_grid": {
          "type": "stack_panel",
          "orientation": "vertical",
          "size": [ "100%", 20 ],

          "clip_state_change_event": "$store_factory_clipping_event",

          "$nav_button_binding_type": "collection",
          "$nav_button_collection_name": "nav_button_collection",
          "collection_name": "$nav_button_collection_name",

          "factory": {
            "name": "nav_button_factory",
            "control_ids": {
              "nav_button_standard": "@store_home_mcjava.nav_button_standard",
              "nav_button_fill": "@store_home_mcjava.nav_button_fill"
            },
            "factory_variables": [
              "$nav_button_collection_name",
              "$nav_button_binding_type",
              "$store_factory_collection_details",
              "$store_factory_collection_prefix",
              "$store_factory_collection_name"
            ]
          },
          "bindings": [
            {
              "binding_type": "$store_factory_collection_details",
              "binding_collection_name": "$store_factory_collection_name",
              "binding_collection_prefix": "$store_factory_collection_prefix"
            },
            {
              "binding_name": "#nav_section_content",
              "binding_name_override": "#collection_length"              
            }
          ]
        }
      }
    ]
  },

  "nav_button_standard": {
    "type": "panel",
    "size": [ 150, 20],
    "controls": [
      {
        "nav_button@button_mcjava.button": {
          "size": [150, 20],
          "$pressed_button_name": "button.nav_button",
          "$button_content": "store_home_mcjava.nav_button_content",
          "$button_bindings": [
            {
              "binding_type": "$store_factory_collection_details",
              "binding_collection_name": "$store_factory_collection_name",
              "binding_collection_prefix": "$store_factory_collection_prefix"
            },
            {
              "binding_type": "collection_details",
              "binding_collection_name": "$nav_button_collection_name",
              "binding_collection_prefix": "nav"
            }
          ]
        }
      }
    ]
  },

  "nav_button_fill@nav_button_standard": {
    "size": [ 150, "100%" ]
  },

  "nav_button_content": {
    "type": "stack_panel",
    "orientation": "horizontal",
    "size": [ "100%", "100%" ],
    "$nav_button_binding_type|default": "global",
    "$nav_button_collection_name|default": "",
    "controls": [
      { "space": { "type": "panel", "size": [4, 0]}},
      {
        "label_panel": {
          "type": "panel",
          "size": [ "fill", "100%" ],
          "controls": [
            {
              "button_text_label@common_buttons.new_ui_binding_button_label": {
                "layer": 5,
                "$button_text": "#nav_button_label",
                "$button_text_size": [ "100%", "default" ],
                "$button_text_max_size": [ "100%", 20 ],
                "shadow": true,
                "$text_alignment": "left",
                "bindings": [
                  {
                    "binding_type": "$store_factory_collection_details",
                    "binding_collection_name": "$store_factory_collection_name",
                    "binding_collection_prefix": "$store_factory_collection_prefix"
                  },
                  {
                    "binding_type": "$nav_button_binding_type",
                    "binding_collection_name": "$nav_button_collection_name",
                    "binding_name": "$button_text"
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  },

  "categories_button@store_item_details_mcjava.button_template": {
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "offset": [17, 30],
    "$toggle_index": 1,
    "$toggle_button_name": "categories",
    "$toggle_button_text": "Categories",
    "$toggle_control_name": "categories_view",
    "bindings": [
      {
        "binding_type": "view",
        "source_control_name": "categories_view",
        "source_property_name": "(not #toggle_state)",
        "target_property_name": "#visible"
      }
    ]
  },

  "categories_back_button@store_item_details_mcjava.button_template": {
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "offset": [17, 30],
    "$toggle_button_name": "categories",
    "$toggle_button_text": "Categories",
    "$cancel_mapping": true
  },

  "scrolling@scrolling_mcjava.scrolling_panel": {
    "$scrolling_content": "store_home_mcjava.scroll_content",
    "anchor_from": "top_middle",
    "anchor_to": "top_middle",
    "offset": [0, 60],
    "$dirt_scroll": true,
    "orientation": "vertical",
    "size": [ "100%", "100% - 96px" ]
  },

  "scroll_content": {
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "type": "stack_panel",
    "orientation": "vertical",
    "size": [310, "100%c" ],
    "controls": [
      { "top_space@common_mcjava.vspace": { "size": [0, 4] } },
      { "store_factory@store_home_mcjava.store_section_factory": {} },
      { "footer@common_store.footer": {} }
    ]
  },

  "store_section_factory": {
    "type": "stack_panel",
    "anchor_from": "top_middle",
    "anchor_to": "top_middle",
    "orientation": "vertical",
    "size": ["100%", "100%c - 288px" ],
    "$store_factory_clipping_event": "factory_section_shown",
    "$store_factory_collection_details": "collection_details",
    "$store_factory_binding_type": "collection",
    "$store_factory_collection_prefix": "factory",
    "$store_factory_collection_name": "factory_collection",
    "$is_realms_plus_screen|default": false,
    "$content_offer_panel_size|default": [ "100%", "100%c" ],
    "$realms_chevron_binding_name|default": "#realms_chevron_visibility",
    "factory": {
      "name": "store_section_factory",
      "control_ids": {
        "vertical_padding_4_section": "@common_store.vertical_padding_4",
        "vertical_padding_2_section": "@common_store.vertical_padding_2",
        "promo_row": "@store_layout.promo_row_panel",
        "hero_row": "@common_store.hero_row_panel",
        "hero_row_l2": "@common_store.hero_row_l2_panel",
        "store_row": "@store_home_mcjava.store_row_panel",
        "store_offer_grid": "@common_store.store_offer_grid_panel"/* ,
        "footer_section": "@common_store.footer" */
      },
      "factory_variables": [
        "$ratings_visible_after_x_reviews",
        "$store_factory_clipping_event",
        "$store_factory_collection_details",
        "$store_factory_collection_prefix",
        "$store_factory_collection_name",
        "$store_factory_binding_type",
        "$is_realms_plus_screen",
        "$content_offer_panel_size",
        "$realms_chevron_binding_name"
      ]
    },
    "collection_name": "$store_factory_collection_name",
    "bindings": [
      {
        "binding_name": "#store_section_content",
        "binding_name_override": "#collection_length"
      }
    ]
  },

  "store_row_panel": {
    "type": "panel",
    "size": [ "100%", "100%c" ],
    "controls": [
      {
        "store_row_content@store_home_mcjava.store_row": {}
      }
    ]
  },

  "store_row": {
    "type": "panel",
    "size": [270, 174 ],

    "clip_state_change_event": "$store_factory_clipping_event",

    // row binding vars
    "$store_row_binding_type|default": "global",
    "$store_row_collection_details|default": "none",
    "$store_row_collection_prefix|default": "",
    "$store_row_collection_name|default": "",

    // factory binding vars (for when created within a factory)
    "$store_factory_collection_details|default": "none",
    "$store_factory_collection_prefix|default": "",
    "$store_factory_collection_name|default": "",

    "$cycle_pack_button_factory_collection_details": "$store_factory_collection_details",
    "$cycle_pack_button_factory_collection_prefix": "$store_factory_collection_prefix",
    "$cycle_pack_button_factory_collection_name": "$store_factory_collection_name",

    "$cycle_pack_button_collection": "$store_row_collection_name",
    "$cycle_pack_button_collection_type": "$store_row_binding_type",

    "$offer_category_collection_details": "$store_row_collection_details",
    "$offer_category_collection_prefix": "$store_row_collection_prefix",
    "$offer_category_collection_name": "$store_row_collection_name",

    "$offer_collection_details": "collection_details",
    "$offer_binding_type": "collection",
    "$offer_collection_prefix": "offer",
    "$offer_collection_name": "offer_collection",
    "bindings": [
      {
        "binding_type": "$store_factory_collection_details",
        "binding_collection_name": "$store_factory_collection_name",
        "binding_collection_prefix": "$store_factory_collection_prefix"
      },
      {
        "binding_name": "#store_row_visible",
        "binding_name_override": "#visible"
      }
    ],
    "controls": [
      {
        "header@store_content_mcjava.style_header": {
          "anchor_from": "top_left",
          "anchor_to": "top_left"
        }
      },
      {
        "cycle_pack_left_button@store_take_tour_mcjava.cycle_pack_left_button": {
          "$pressed_button_name": "button.cycle_offer_left",
          "ignored": "$is_realms_plus_screen",
          "anchor_from": "bottom_left",
          "anchor_to": "bottom_left",
          "$chevron_icon": "src/assets/img/chevron_left",
          "$button_content": "filter_menu_mcjava.chevron_icon_panel",
          "size": ["50%", 20 ]
        }
      },
      {
        "content@content_offer_panel": {
          "type": "stack_panel",
          "size": ["100%", 144],
          "collection_name": "offer_collection",
          "anchor_from": "top_middle",
          "offset": [0, 10],
          "anchor_to": "top_middle",
          "controls": [
            {
              "offer_item_1@store_offer_list_mcjava.new_store_offer_grid_item": {
                "collection_index": 0,
                "size": ["100%", 36]
              }
            },
            {
              "offer_item_2@store_offer_list_mcjava.new_store_offer_grid_item": {
                "size": ["100%", 36],
                "collection_index": 1
              }
            },
            {
              "offer_item_3@store_offer_list_mcjava.new_store_offer_grid_item": {
                "size": ["100%", 36],
                "collection_index": 2
              }
            },
            {
              "offer_item_4_panel": {
                "type": "panel",
                "collection_index": 3,
                "size": ["100%", 36],
                "$focus_override_right": "FOCUS_OVERRIDE_STOP",
                "controls": [
                  {
                    "show_more@store_offer_list_mcjava.new_store_offer_grid_item": {
                      "size": [ "100%", "100%" ]
                    }
                  }/* ,
                  {
                    "offer_item_4@store_offer_list_mcjava.store_offer_grid_item": {
                      "size": [ "100%", "100%" ]
                    }
                  } */
                ]
              }
            }
          ]
        }
      },
      {
        "cycle_pack_right_button@store_take_tour_mcjava.cycle_pack_right_button": {
          "$pressed_button_name": "button.cycle_offer_right",
          "ignored": "$is_realms_plus_screen",
          "anchor_from": "bottom_right",
          "anchor_to": "bottom_right",
          "$chevron_icon": "src/assets/img/chevron_right",
          "$button_content": "filter_menu_mcjava.chevron_icon_panel",
          "size": ["50%", 20 ]
        }
      }
    ]
  },

  "conten_offer_panel": {
    "type": "stack_panel",
    "size": "$content_offer_panel_size",
    "collection_name": "$offer_collection_name",
    "controls": [
      {
        "offer_item_1@common_store.store_offer_grid_item": {
          "collection_index": 0,
          "$focus_override_left": "FOCUS_OVERRIDE_STOP"
        }
      },
      {
        "offer_item_2@common_store.store_offer_grid_item": {
          "collection_index": 1
        }
      },
      {
        "offer_item_3@common_store.store_offer_grid_item": {
          "collection_index": 2
        }
      },
      {
        "offer_item_4_panel": {
          "type": "panel",
          "size": [ "25%", "100%" ],
          "collection_index": 3,
          "$focus_override_right": "FOCUS_OVERRIDE_STOP",
          "controls": [
            {
              "show_more@common_store.store_offer_grid_show_more": {
                "size": [ "100%", "100%" ]
              }
            },
            {
              "offer_item_4@common_store.store_offer_grid_item": {
                "size": [ "100%", "100%" ]
              }
            }
          ]
        }
      }
    ]
  },

  "content_offer_panel": {
    "type": "stack_panel",
    "size": ["100%", 144],
    "collection_name": "$offer_collection_name",
    "controls": [
      {
        "offer_item_1@store_offer_list_mcjava.store_offer_grid_item": {
          "collection_index": 0,
          "size": ["100%", 36]
        }
      },
      {
        "offer_item_2@store_offer_list_mcjava.store_offer_grid_item": {
          "size": ["100%", 36],
          "collection_index": 1
        }
      },
      {
        "offer_item_3@store_offer_list_mcjava.store_offer_grid_item": {
          "size": ["100%", 36],
          "collection_index": 2
        }
      },
      {
        "offer_item_4_panel": {
          "type": "panel",
          "size": [ "100%", 36 ],
          "collection_index": 3,
          "controls": [
            {
              "show_more@common_store.store_offer_grid_show_more": {
                "size": [ "100%", "100%" ]
              }
            },
            {
              "offer_item_4@store_offer_list_mcjava.store_offer_grid_item": {
                "size": [ "100%", "100%" ]
              }
            }
          ]
        }
      }
    ]
  }
}